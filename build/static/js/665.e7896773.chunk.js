"use strict";(self.webpackChunkmoba_wiki=self.webpackChunkmoba_wiki||[]).push([[665],{2606:(e,s,t)=>{t.d(s,{i:()=>n});var l=t(5043);const n=function(e){let s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,l.useEffect)(()=>{if(!s)return;const t=s=>{"Escape"===s.key&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e,s])}},7665:(e,s,t)=>{t.d(s,{CounterPickPage:()=>Te});var l=t(5043),n=t(6930),a=t(1795),r=t(9046),o=t(5836),c=t(2555),i=t(5935);const d=["Tank","Fighter","Assassin","Mage","Marksman","Support"],_=e=>Math.abs(e)<1?100*e:e;var h=t(2606),u=t(4218),m=t(579);const x=()=>(0,m.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,m.jsx)("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),j=()=>(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,m.jsx)("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),y=()=>(0,m.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}),(0,m.jsx)("line",{x1:"13",y1:"19",x2:"19",y2:"13"}),(0,m.jsx)("line",{x1:"16",y1:"16",x2:"20",y2:"20"}),(0,m.jsx)("line",{x1:"19",y1:"21",x2:"21",y2:"19"})]}),g=()=>(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"12",cy:"7",r:"4"})]}),v=()=>(0,m.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,m.jsx)("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),(0,m.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,m.jsx)("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),(0,m.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),N=()=>(0,m.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,m.jsx)("polyline",{points:"6 9 12 15 18 9"})}),p="styles_page__UU7na",k="styles_header__4JohK",S="styles_title__uH9ce",C="styles_description__gJsU3",b="styles_modeTabs__436aD",w="styles_modeTab__mWQ0m",R="styles_modeTabActive__ZjWEc",f="styles_selectionArea__Qk+Aj",M="styles_singleSelect__h+IfU",H="styles_teamSelect__tuvye",W="styles_teamSlots__lzoi7",P="styles_heroSlot__j8PTu",I="styles_heroSlotSmall__jSH5C",J="styles_heroSlotFilled__SbpD5",L="styles_slotImageWrap__iKz8z",F="styles_slotImage__WNRtB",B="styles_slotName__gEnd-",T="styles_slotRemove__90rh6",A="styles_slotPlaceholder__DikaU",E="styles_slotPlaceholderIcon__NajWm",D="styles_clearBtn__o8qlA",U="styles_selectorOverlay__umVz5",z="styles_selector__wJpEI",Q="styles_selectorHeader__JjmJk",V="styles_selectorSearch__kjjnS",Y="styles_selectorClose__2noSP",K="styles_selectorRoleTabs__ho1X0",G="styles_roleTab__JfMIW",O="styles_roleTabActive__8UIg+",X="styles_selectorGrid__CVBvC",Z="styles_selectorHero__BjcQ+",q="styles_selectorHeroSelected__YJbD5",$="styles_selectorHeroImg__HpwDF",ee="styles_selectorHeroName__AiI-S",se="styles_results__sH9z4",te="styles_resultsSection__hS7p7",le="styles_resultsHeader__FK2UX",ne="styles_resultsHeroImg__ECN7p",ae="styles_resultsHeroName__dTNTI",re="styles_resultsWinRate__ijDRH",oe="styles_teamResultsHeader__SoYU6",ce="styles_subTabs__ZDO2M",ie="styles_subTab__yID5A",de="styles_subTabActive__ZxmIL",_e="styles_subTabDesc__a4S3J",he="styles_counterList__Pp6AD",ue="styles_counterItem__6nKY9",me="styles_teamCounterItem__ysW-E",xe="styles_teamCounterRow__g6rGm",je="styles_counterRank__cSRUY",ye="styles_counterImg__GBbXv",ge="styles_counterInfo__Kd8aP",ve="styles_counterName__HEm6W",Ne="styles_counterRoles__JJgYU",pe="styles_roleTag__XP0Yy",ke="styles_counterBar__uvbAx",Se="styles_counterBarFill__5hh6a",Ce="styles_counterStats__hYF+P",be="styles_counterScore__Nzu-i",we="styles_counterWr__2Cx2B",Re="styles_expandBtn__VVTc2",fe="styles_expandBtnOpen__mcnD6",Me="styles_detailsPanel__83jxK",He="styles_detailRow__SUMV0",We="styles_detailImg__iavgN",Pe="styles_detailName__zPVye",Ie="styles_detailScore__E1QeX",Je="styles_detailWr__FHWwZ",Le="styles_noResults__P5FN5",Fe=(0,l.memo)(e=>{let{hero:s,results:t,lang:n,gameId:a,t:o}=e;const[c,i]=(0,l.useState)("counters"),d="counters"===c?t.mostCounteredBy:t.bestCounters;return(0,m.jsxs)("div",{className:te,children:[(0,m.jsxs)(u.N_,{to:"/".concat(a,"/heroes/").concat(s.id),className:le,children:[(0,m.jsx)("img",{src:s.head||s.image,alt:(0,r.MJ)(s,n),className:ne}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:ae,children:(0,r.MJ)(s,n)}),t.mainWinRate&&(0,m.jsxs)("span",{className:re,children:[o("counterPick.winRate"),": ",t.mainWinRate.toFixed(1),"%"]})]})]}),(0,m.jsxs)("div",{className:ce,children:[(0,m.jsxs)("button",{className:"".concat(ie," ").concat("counters"===c?de:""),onClick:()=>i("counters"),children:[(0,m.jsx)(j,{}),o("counterPick.countersHim")]}),(0,m.jsxs)("button",{className:"".concat(ie," ").concat("strong"===c?de:""),onClick:()=>i("strong"),children:[(0,m.jsx)(y,{}),o("counterPick.strongAgainst")]})]}),(0,m.jsx)("p",{className:_e,children:o("counters"===c?"counterPick.countersHimDesc":"counterPick.strongAgainstDesc",{hero:(0,r.MJ)(s,n)})}),(0,m.jsx)("div",{className:he,children:d.slice(0,10).map((e,s)=>(0,m.jsxs)(u.N_,{to:"/".concat(a,"/heroes/").concat(e.hero.id),className:ue,children:[(0,m.jsxs)("span",{className:je,children:["#",s+1]}),(0,m.jsx)("img",{src:e.hero.head||e.hero.image,alt:(0,r.MJ)(e.hero,n),className:ye}),(0,m.jsxs)("div",{className:ge,children:[(0,m.jsx)("span",{className:ve,children:(0,r.MJ)(e.hero,n)}),(0,m.jsx)("div",{className:ke,children:(0,m.jsx)("div",{className:Se,style:{width:"".concat(Math.min(Math.abs(e.increaseWinRate)/5*100,100),"%")}})})]}),(0,m.jsxs)("div",{className:Ce,children:[(0,m.jsxs)("span",{className:be,children:[e.increaseWinRate>0?"+":"",e.increaseWinRate.toFixed(1),"%"]}),(0,m.jsxs)("span",{className:we,children:[e.winRate.toFixed(1),"% WR"]})]})]},e.heroid))})]})});Fe.displayName="SingleResults";const Be=(0,l.memo)(e=>{let{results:s,lang:t,gameId:n,t:a,enemyCount:o}=e;const[c,i]=(0,l.useState)(null);return(0,m.jsxs)("div",{className:te,children:[(0,m.jsxs)("div",{className:oe,children:[(0,m.jsx)("h2",{children:a("counterPick.bestPicks")}),(0,m.jsx)("p",{children:a("counterPick.bestPicksDesc",{count:o})})]}),(0,m.jsx)("div",{className:he,children:s.map((e,s)=>{var l;return(0,m.jsxs)("div",{className:me,children:[(0,m.jsxs)("div",{className:xe,children:[(0,m.jsxs)(u.N_,{to:"/".concat(n,"/heroes/").concat(e.hero.id),className:ue,children:[(0,m.jsxs)("span",{className:je,children:["#",s+1]}),(0,m.jsx)("img",{src:e.hero.head||e.hero.image,alt:(0,r.MJ)(e.hero,t),className:ye}),(0,m.jsxs)("div",{className:ge,children:[(0,m.jsx)("span",{className:ve,children:(0,r.MJ)(e.hero,t)}),(0,m.jsx)("div",{className:Ne,children:null===(l=e.hero.roles)||void 0===l?void 0:l.map(e=>(0,m.jsx)("span",{className:pe,children:e},e))})]}),(0,m.jsxs)("div",{className:Ce,children:[(0,m.jsxs)("span",{className:be,children:[e.totalScore>0?"+":"",e.totalScore.toFixed(1),"%"]}),(0,m.jsxs)("span",{className:we,children:[a("counterPick.avgWr"),": ",e.avgWinRate.toFixed(1),"%"]})]})]}),(0,m.jsx)("button",{className:"".concat(Re," ").concat(c===e.heroId?fe:""),onClick:()=>i(c===e.heroId?null:e.heroId),"aria-label":"Toggle details",children:(0,m.jsx)(N,{})})]}),c===e.heroId&&(0,m.jsx)("div",{className:Me,children:e.details.map(e=>{var s;return(0,m.jsxs)("div",{className:He,children:[(0,m.jsx)("img",{src:e.enemyHero.head||e.enemyHero.image,alt:(0,r.MJ)(e.enemyHero,t),className:We}),(0,m.jsxs)("span",{className:Pe,children:["vs ",(0,r.MJ)(e.enemyHero,t)]}),(0,m.jsxs)("span",{className:Ie,children:[e.increaseWinRate>0?"+":"",e.increaseWinRate.toFixed(1),"%"]}),(0,m.jsxs)("span",{className:Je,children:[e.winRate.toFixed(1),"% WR"]})]},null!==(s=e.enemyHero.hero_game_id)&&void 0!==s?s:e.enemyHero.id)})})]},e.heroId)})}),0===s.length&&(0,m.jsx)("div",{className:Le,children:(0,m.jsx)("p",{children:a("counterPick.noResults")})})]})});Be.displayName="TeamResults";const Te=()=>{const{t:e,i18n:s}=(0,n.Bd)(),t=s.language,{selectedGameId:u}=(0,a.T)(),{mode:j,selectedHero:y,teamHeroes:N,searchQuery:te,isSelectorOpen:le,selectingSlot:ne,selectorRef:ae,filteredHeroes:re,roleFilter:oe,setRoleFilter:ce,roles:ie,isLoading:de,singleResults:_e,teamResults:he,setSelectedHero:ue,setSearchQuery:me,handleSelectHero:xe,openSelector:je,closeSelector:ye,removeTeamHero:ge,clearAll:ve,switchMode:Ne}=function(e,s){const{data:t,isLoading:n}=(0,i.GA)(e),{data:a,isLoading:o}=(0,i.u8)(e),[h,u]=(0,l.useState)("single"),[m,x]=(0,l.useState)(null),[j,y]=(0,l.useState)([]),[g,v]=(0,l.useState)(""),[N,p]=(0,l.useState)(!1),[k,S]=(0,l.useState)(null),[C,b]=(0,l.useState)(null),w=(0,l.useRef)(null),R=(0,l.useMemo)(()=>{if(!t)return new Map;const e=new Map;return t.forEach(s=>{null!=s.hero_game_id&&e.set(s.hero_game_id,s),e.has(s.id)||e.set(s.id,s)}),e},[t]),f=(0,l.useMemo)(()=>{if(!t)return[];let e=[...t].sort((e,t)=>(0,r.MJ)(e,s).localeCompare((0,r.MJ)(t,s)));if(g){const t=g.toLowerCase();e=e.filter(e=>(0,r.MJ)(e,s).toLowerCase().includes(t)||e.name.toLowerCase().includes(t))}return C&&(e=e.filter(e=>{var s;return null===(s=e.roles)||void 0===s?void 0:s.includes(C)})),e},[t,s,g,C]);(0,l.useEffect)(()=>{const e=e=>{w.current&&!w.current.contains(e.target)&&(p(!1),S(null))};return N&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[N]);const M=(0,l.useCallback)(e=>{"single"===h?(x(e),p(!1)):null!==k?(y(s=>{const t=[...s];return t[k]=e,t}),S(null),p(!1)):(y(s=>s.length>=5||s.find(s=>s.id===e.id)?s:[...s,e]),p(!1)),v("")},[h,k]),H=(0,l.useCallback)(e=>{S(null!==e&&void 0!==e?e:null),p(!0),v(""),b(null)},[]),W=(0,l.useCallback)(()=>{p(!1),S(null)},[]),P=(0,l.useCallback)(e=>{y(s=>s.filter((s,t)=>t!==e))},[]),I=(0,l.useCallback)(()=>{x(null),y([])},[]),J=(0,l.useCallback)(e=>{u(e),p(!1),S(null)},[]),L=(0,l.useMemo)(()=>{var e;if("single"!==h||!m||!a)return null;const s=null!==(e=m.hero_game_id)&&void 0!==e?e:m.id,t=a[s];if(!t)return null;const l=e=>(0,c.A)((0,c.A)({},e),{},{hero:R.get(e.heroid),winRate:_(e.win_rate),increaseWinRate:_(e.increase_win_rate)});return{mainWinRate:t.main_hero_win_rate?_(t.main_hero_win_rate):null,bestCounters:(t.best_counters||[]).map(l).filter(e=>e.hero),mostCounteredBy:(t.most_countered_by||[]).map(l).filter(e=>e.hero)}},[h,m,a,R]),F=(0,l.useMemo)(()=>{if("team"!==h||0===j.length||!a||!t)return null;const e=new Set(j.map(e=>{var s;return null!==(s=e.hero_game_id)&&void 0!==s?s:e.id})),s=new Map;for(const t of j){var l;const n=a[null!==(l=t.hero_game_id)&&void 0!==l?l:t.id];if(null!==n&&void 0!==n&&n.most_countered_by)for(const l of n.most_countered_by){if(e.has(l.heroid))continue;const n=_(l.increase_win_rate),a=_(l.win_rate),r=s.get(l.heroid);r?(r.totalScore+=n,r.totalWinRate+=a,r.count+=1,r.details.push({enemyHero:t,increaseWinRate:n,winRate:a})):s.set(l.heroid,{totalScore:n,totalWinRate:a,count:1,details:[{enemyHero:t,increaseWinRate:n,winRate:a}]})}}const n=[];return s.forEach((e,s)=>{const t=R.get(s);t&&n.push({heroId:s,hero:t,totalScore:e.totalScore,avgWinRate:e.totalWinRate/e.count,details:e.details})}),n.sort((e,s)=>s.totalScore-e.totalScore),n.slice(0,15)},[h,j,a,t,R]);return{mode:h,selectedHero:m,teamHeroes:j,searchQuery:g,isSelectorOpen:N,selectingSlot:k,selectorRef:w,filteredHeroes:f,roleFilter:C,setRoleFilter:b,roles:d,isLoading:n||o,singleResults:L,teamResults:F,setSelectedHero:x,setSearchQuery:v,handleSelectHero:M,openSelector:H,closeSelector:W,removeTeamHero:P,clearAll:I,switchMode:J}}(u,t);return(0,h.i)(ye,le),de?(0,m.jsx)(o.a,{}):(0,m.jsxs)("div",{className:p,children:[(0,m.jsxs)("div",{className:k,children:[(0,m.jsx)("h1",{className:S,children:e("counterPick.title")}),(0,m.jsx)("p",{className:C,children:e("counterPick.description")})]}),(0,m.jsxs)("div",{className:b,children:[(0,m.jsxs)("button",{className:"".concat(w," ").concat("single"===j?R:""),onClick:()=>Ne("single"),children:[(0,m.jsx)(g,{}),(0,m.jsx)("span",{children:e("counterPick.singleMode")})]}),(0,m.jsxs)("button",{className:"".concat(w," ").concat("team"===j?R:""),onClick:()=>Ne("team"),children:[(0,m.jsx)(v,{}),(0,m.jsx)("span",{children:e("counterPick.teamMode")})]})]}),(0,m.jsxs)("div",{className:f,children:["single"===j?(0,m.jsx)("div",{className:M,children:(0,m.jsx)("div",{className:"".concat(P," ").concat(y?J:""),onClick:()=>je(),children:y?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:L,children:(0,m.jsx)("img",{src:y.head||y.image,alt:(0,r.MJ)(y,t),className:F})}),(0,m.jsx)("span",{className:B,children:(0,r.MJ)(y,t)}),(0,m.jsx)("button",{className:T,onClick:e=>{e.stopPropagation(),ue(null)},children:(0,m.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,m.jsx)("path",{d:"M1 1l8 8M9 1l-8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}):(0,m.jsxs)("div",{className:A,children:[(0,m.jsx)("div",{className:E,children:(0,m.jsx)(x,{})}),(0,m.jsx)("span",{children:e("counterPick.selectHero")})]})})}):(0,m.jsxs)("div",{className:H,children:[(0,m.jsx)("div",{className:W,children:[0,1,2,3,4].map(e=>(0,m.jsx)("div",{className:"".concat(P," ").concat(I," ").concat(N[e]?J:""),onClick:()=>N[e]?je(e):je(),children:N[e]?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:L,children:(0,m.jsx)("img",{src:N[e].head||N[e].image,alt:(0,r.MJ)(N[e],t),className:F})}),(0,m.jsx)("span",{className:B,children:(0,r.MJ)(N[e],t)}),(0,m.jsx)("button",{className:T,onClick:s=>{s.stopPropagation(),ge(e)},children:(0,m.jsx)("svg",{width:"8",height:"8",viewBox:"0 0 10 10",fill:"none",children:(0,m.jsx)("path",{d:"M1 1l8 8M9 1l-8 8",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})})]}):(0,m.jsx)("div",{className:A,children:(0,m.jsx)("div",{className:E,children:(0,m.jsx)(x,{})})})},e))}),N.length>0&&(0,m.jsx)("button",{className:D,onClick:ve,children:e("counterPick.clearAll")})]}),le&&(0,m.jsx)("div",{className:U,onClick:ye,children:(0,m.jsxs)("div",{className:z,ref:ae,onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:Q,children:[(0,m.jsx)("input",{type:"text",className:V,placeholder:e("counterPick.searchHero"),value:te,onChange:e=>me(e.target.value),autoFocus:!0}),(0,m.jsx)("button",{className:Y,onClick:ye,children:"\xd7"})]}),(0,m.jsxs)("div",{className:K,children:[(0,m.jsx)("button",{className:"".concat(G," ").concat(oe?"":O),onClick:()=>ce(null),children:e("heroes.filters.allRoles")}),ie.map(s=>(0,m.jsx)("button",{className:"".concat(G," ").concat(oe===s?O:""),onClick:()=>ce(oe===s?null:s),children:e("heroes.filters.".concat(s.toLowerCase()))},s))]}),(0,m.jsx)("div",{className:X,children:re.map(e=>{const s="single"===j?(null===y||void 0===y?void 0:y.id)===e.id:N.some(s=>s.id===e.id);return(0,m.jsxs)("button",{className:"".concat(Z," ").concat(s?q:""),onClick:()=>xe(e),disabled:s&&"team"===j&&null===ne,children:[(0,m.jsx)("img",{src:e.head||e.image,alt:(0,r.MJ)(e,t),className:$}),(0,m.jsx)("span",{className:ee,children:(0,r.MJ)(e,t)})]},e.id)})})]})})]}),(0,m.jsxs)("div",{className:se,children:["single"===j&&y&&_e&&(0,m.jsx)(Fe,{hero:y,results:_e,lang:t,gameId:u,t:e}),"team"===j&&N.length>0&&he&&(0,m.jsx)(Be,{results:he,lang:t,gameId:u,t:e,enemyCount:N.length})]})]})}}}]);
//# sourceMappingURL=665.e7896773.chunk.js.map