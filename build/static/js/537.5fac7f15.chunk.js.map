{"version":3,"file":"static/js/537.5fac7f15.chunk.js","mappings":"qHAIO,MAAMA,EAAmBC,GACvBA,EAAKC,QACV,iKACA,yC,gDCDG,MAAMC,EAAgBC,GACtBA,EACEC,EAAAA,EAAUC,SAASF,EAAO,CAC/BG,aAAc,CACZ,IAAK,IAAK,KAAM,SAAU,IAAK,IAAK,KAAM,IAAK,OAAQ,MACvD,KAAM,KAAM,KAAM,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KACrD,QAAS,QAAS,QAAS,KAAM,KAAM,KAAM,MAAO,MAAO,OAE7DC,aAAc,CAAC,OAAQ,SAAU,MAAO,QAAS,QAAS,MAAO,MAAO,WAPvD,E,kICNrB,QAA6B,2BAA7B,EAAiG,uBAAjG,EAAgI,sBAAhI,EAAsM,4BAAtM,EAA0O,sBAA1O,EAAyQ,uBAAzQ,EAA6S,2BAA7S,EAAoV,0BAApV,EAA4X,4BAA5X,EAAoa,0BAApa,EAA0c,0BAA1c,EAAgf,0BAAhf,EAAshB,0BAAthB,EAA2jB,yBAA3jB,EAAgmB,0BAAhmB,EAAsoB,0BAAtoB,EAAgrB,8BAAhrB,EAAiuB,iC,gCCiGjuB,QArFA,WACE,MAAM,EAAEC,EAAC,KAAEC,IAASC,EAAAA,EAAAA,MACdC,EAAOF,EAAKG,UACZ,OAAEC,IAAWC,EAAAA,EAAAA,MACnBC,EAAAA,EAAAA,GAAO,CAAEC,MAAO,gBAAiBC,YAAa,kFAE9C,MAAQC,KAAMC,EAAS,GAAIC,UAAWC,EAASC,MAAOC,IAAeC,EAAAA,EAAAA,GAAwB,CAC3FC,SAAUC,EAAAA,EAAUP,OAAOQ,IAAIC,OAAOf,IACtCgB,QAASA,KAAMC,EAAAA,EAAAA,GAAU,0BAAAC,OAA0ClB,IACnEmB,UAAWnB,EACXoB,UAAWC,EAAAA,IAGPZ,EAAQC,EAAaf,EAAE,uBAAyB,KAEtD,OAAIa,GACKc,EAAAA,EAAAA,KAACC,EAAAA,EAAM,IAGZd,GACKa,EAAAA,EAAAA,KAAA,OAAKE,UAAWC,EAAaC,SAAEjB,IAGlB,IAAlBH,EAAOqB,QACFL,EAAAA,EAAAA,KAAA,OAAKE,UAAWC,EAAcC,SAAE/B,EAAE,sBAIzCiC,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAkBC,SAAA,EAEhCE,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAcC,SAAA,EAC5BJ,EAAAA,EAAAA,KAAA,MAAIE,UAAWC,EAAaC,SAAE/B,EAAE,mBAChC2B,EAAAA,EAAAA,KAAA,KAAGE,UAAWC,EAAmBC,SAC9B/B,EAAE,4BAKP2B,EAAAA,EAAAA,KAAA,OAAKE,UAAWC,EAAkBC,SAC/BpB,EAAOuB,IAAKC,IACXF,EAAAA,EAAAA,MAAA,OAAoBJ,UAAWC,EAAiBC,SAAA,EAC9CE,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAmBC,SAAA,CAChCI,EAAMC,WACLT,EAAAA,EAAAA,KAAA,OACEU,IAAKF,EAAMC,SACXE,KAAKC,EAAAA,EAAAA,IAAaJ,EAAOhC,GACzB0B,UAAWC,KAGfG,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAiBC,SAAA,EAC/BJ,EAAAA,EAAAA,KAAA,MAAIE,UAAWC,EAAiBC,UAAEQ,EAAAA,EAAAA,IAAaJ,EAAOhC,MACtD8B,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAiBC,SAAA,MACXS,IAAnBL,EAAMM,UAA6C,OAAnBN,EAAMM,WACrCR,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAgBC,SAAA,EAC9BE,EAAAA,EAAAA,MAAA,QAAMJ,UAAWC,EAAiBC,SAAA,CAAE/B,EAAE,mBAAmB,QACzDiC,EAAAA,EAAAA,MAAA,QAAMJ,UAAWC,EAAiBC,SAAA,CAAEI,EAAMM,SAAS,eAG7BD,IAAzBL,EAAMO,gBAAyD,OAAzBP,EAAMO,iBAC3CT,EAAAA,EAAAA,MAAA,OAAKJ,UAAWC,EAAgBC,SAAA,EAC9BE,EAAAA,EAAAA,MAAA,QAAMJ,UAAWC,EAAiBC,SAAA,CAAE/B,EAAE,iBAAiB,QACvDiC,EAAAA,EAAAA,MAAA,QAAMJ,UAAWC,EAAiBC,SAAA,CAAE/B,EAAE,gBAAgB,IAAEmC,EAAMO,+BAOtEP,EAAMQ,UAAYR,EAAMS,eACxBjB,EAAAA,EAAAA,KAAA,KAAGE,UAAWC,EAAqBC,UAAEc,EAAAA,EAAAA,IAAiBV,EAAOhC,MAG7DgC,EAAM1B,aAAe0B,EAAMW,kBAC3BnB,EAAAA,EAAAA,KAAA,OACEE,UAAWC,EACXiB,wBAAyB,CAAEC,QAAQtD,EAAAA,EAAAA,IAAaH,EAAAA,EAAAA,IAAgB0D,EAAAA,EAAAA,IAAoBd,EAAOhC,UAnCvFgC,EAAMe,SA2C1B,C,gDCxFA,MAAMC,EAAa,uCACbC,EAAmB,6HAEnBC,EAAa,GAAA9B,OADF,8CACgB,gBAE3B+B,EAAaA,CAACC,EAAkBC,KACpC,IAAIC,EAAOC,SAASC,cAAc,kBAADpC,OAAmBgC,EAAQ,OACvDE,IACHA,EAAOC,SAASE,cAAc,QAC9BH,EAAKI,aAAa,WAAYN,GAC9BG,SAASI,KAAKC,YAAYN,IAE5BA,EAAKI,aAAa,UAAWL,IAGzBQ,EAAcA,CAACC,EAAcT,KACjC,IAAIC,EAAOC,SAASC,cAAc,cAADpC,OAAe0C,EAAI,OAC/CR,IACHA,EAAOC,SAASE,cAAc,QAC9BH,EAAKI,aAAa,OAAQI,GAC1BP,SAASI,KAAKC,YAAYN,IAE5BA,EAAKI,aAAa,UAAWL,IAGlBjD,EAAS,WAAmD,IAAlD,MAAEC,EAAK,YAAEC,EAAW,MAAEyD,GAAiBC,UAAAnC,OAAA,QAAAQ,IAAA2B,UAAA,GAAAA,UAAA,GAAG,CAAC,GAChEC,EAAAA,EAAAA,WAAU,KACR,MAAMC,EAAY7D,EAAK,GAAAe,OAAMf,EAAK,OAAAe,OAAM4B,GAAeA,EACjDmB,EAAO7D,GAAe2C,EACtBmB,EAAML,GAASb,EACfmB,EAAMC,OAAOC,SAASC,KAqB5B,OAnBAjB,SAASlD,MAAQ6D,EAGjBL,EAAY,cAAeM,GAG3BhB,EAAW,WAAYe,GACvBf,EAAW,iBAAkBgB,GAC7BhB,EAAW,WAAYiB,GACvBjB,EAAW,SAAUkB,GACrBlB,EAAW,UAAW,WACtBA,EAAW,eAAgB,aAG3BU,EAAY,eAAgB,uBAC5BA,EAAY,gBAAiBK,GAC7BL,EAAY,sBAAuBM,GACnCN,EAAY,gBAAiBO,GAEtB,KACLb,SAASlD,MAAQ2C,EACjBa,EAAY,cAAeZ,KAE5B,CAAC5C,EAAOC,EAAayD,GAC1B,C","sources":["utils/highlightValues.ts","utils/sanitize.ts","webpack://moba-wiki/./src/pages/SpellsPage/styles.module.scss?43c9","pages/SpellsPage/index.tsx","hooks/useSEO.ts"],"sourcesContent":["/**\n * Підсвічує числові показники у тексті: 30%, +65, 2s, 5 seconds, тощо.\n * Обгортає їх у <span class=\"stat-highlight\"> для стилізації.\n */\nexport const highlightValues = (text: string): string => {\n  return text.replace(\n    /(\\+?\\d+(?:\\.\\d+)?\\s*%|\\+\\d+(?:\\.\\d+)?|\\d+(?:\\.\\d+)?\\s*(?:seconds?|секунд[иа]?|сек\\.?|HP|hp|MP|mp|s\\b))/g,\n    '<span class=\"stat-highlight\">$1</span>'\n  );\n};\n","import DOMPurify from 'dompurify';\n\n/**\n * Sanitize HTML string to prevent XSS attacks.\n * Used as a wrapper around dangerouslySetInnerHTML.\n */\nexport const sanitizeHtml = (dirty: string | undefined | null): string => {\n  if (!dirty) return '';\n  return DOMPurify.sanitize(dirty, {\n    ALLOWED_TAGS: [\n      'b', 'i', 'em', 'strong', 'u', 's', 'br', 'p', 'span', 'div',\n      'ul', 'ol', 'li', 'a', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',\n      'table', 'thead', 'tbody', 'tr', 'th', 'td', 'img', 'sup', 'sub',\n    ],\n    ALLOWED_ATTR: ['href', 'target', 'rel', 'class', 'style', 'src', 'alt', 'title'],\n  });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"spellsPage\":\"styles_spellsPage__blV5g\",\"fadeIn\":\"styles_fadeIn__h4W14\",\"header\":\"styles_header__qh9Hm\",\"title\":\"styles_title__6HN3T\",\"shimmer\":\"styles_shimmer__rDWYo\",\"description\":\"styles_description__3Yx29\",\"error\":\"styles_error__k41Nb\",\"noData\":\"styles_noData__mI9kM\",\"spellsGrid\":\"styles_spellsGrid__vDJbY\",\"spellCard\":\"styles_spellCard__Iy6m2\",\"spellHeader\":\"styles_spellHeader__TKazZ\",\"spellIcon\":\"styles_spellIcon__xvH3y\",\"spellInfo\":\"styles_spellInfo__YvVuC\",\"spellName\":\"styles_spellName__zatFW\",\"spellMeta\":\"styles_spellMeta__MhAB-\",\"metaItem\":\"styles_metaItem__QHa6U\",\"metaLabel\":\"styles_metaLabel__kIket\",\"metaValue\":\"styles_metaValue__szHox\",\"spellOverview\":\"styles_spellOverview__X2ED4\",\"spellDescription\":\"styles_spellDescription__DMgjZ\"};","import { useParams } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { useTranslation } from 'react-i18next';\nimport { Loader } from '../../components/Loader';\nimport { useSEO } from '../../hooks/useSEO';\nimport { getSpellName, getSpellOverview, getSpellDescription } from '../../utils/translation';\nimport { highlightValues } from '../../utils/highlightValues';\nimport { sanitizeHtml } from '../../utils/sanitize';\nimport styles from './styles.module.scss';\nimport { fetcherRaw } from '../../api/http/fetcher';\nimport { STALE_5_MIN, queryKeys } from '../../queries/keys';\nimport type { BattleSpell } from '../../types';\n\nfunction SpellsPage() {\n  const { t, i18n } = useTranslation();\n  const lang = i18n.language;\n  const { gameId } = useParams();\n  useSEO({ title: 'Battle Spells', description: 'All Mobile Legends battle spells — cooldowns, effects and unlock levels.' });\n\n  const { data: spells = [], isLoading: loading, error: queryError } = useQuery<BattleSpell[]>({\n    queryKey: queryKeys.spells.all(Number(gameId)),\n    queryFn: () => fetcherRaw<BattleSpell[]>(`/battle-spells?game_id=${gameId}`),\n    enabled: !!gameId,\n    staleTime: STALE_5_MIN,\n  });\n\n  const error = queryError ? t('spells.failedToLoad') : null;\n\n  if (loading) {\n    return <Loader />;\n  }\n\n  if (error) {\n    return <div className={styles.error}>{error}</div>;\n  }\n\n  if (spells.length === 0) {\n    return <div className={styles.noData}>{t('spells.noSpells')}</div>;\n  }\n\n  return (\n    <div className={styles.spellsPage}>\n      {/* Header */}\n      <div className={styles.header}>\n        <h1 className={styles.title}>{t('spells.title')}</h1>\n        <p className={styles.description}>\n          {t('spells.description')}\n        </p>\n      </div>\n\n      {/* Spells Grid */}\n      <div className={styles.spellsGrid}>\n        {spells.map((spell) => (\n          <div key={spell.id} className={styles.spellCard}>\n            <div className={styles.spellHeader}>\n              {spell.icon_url && (\n                <img\n                  src={spell.icon_url}\n                  alt={getSpellName(spell, lang)}\n                  className={styles.spellIcon}\n                />\n              )}\n              <div className={styles.spellInfo}>\n                <h2 className={styles.spellName}>{getSpellName(spell, lang)}</h2>\n                <div className={styles.spellMeta}>\n                  {spell.cooldown !== undefined && spell.cooldown !== null && (\n                    <div className={styles.metaItem}>\n                      <span className={styles.metaLabel}>{t('spells.cooldown')}:</span>\n                      <span className={styles.metaValue}>{spell.cooldown}s</span>\n                    </div>\n                  )}\n                  {spell.unlocked_level !== undefined && spell.unlocked_level !== null && (\n                    <div className={styles.metaItem}>\n                      <span className={styles.metaLabel}>{t('spells.unlock')}:</span>\n                      <span className={styles.metaValue}>{t('spells.level')} {spell.unlocked_level}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {(spell.overview || spell.overview_uk) && (\n              <p className={styles.spellOverview}>{getSpellOverview(spell, lang)}</p>\n            )}\n\n            {(spell.description || spell.description_uk) && (\n              <div\n                className={styles.spellDescription}\n                dangerouslySetInnerHTML={{ __html: sanitizeHtml(highlightValues(getSpellDescription(spell, lang))) }}\n              />\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default SpellsPage;\n","import { useEffect } from 'react';\n\ninterface SEOProps {\n  title?: string;\n  description?: string;\n  image?: string;\n}\n\nconst BASE_TITLE = 'Wiki for Mobile Legends (Unofficial)';\nconst BASE_DESCRIPTION = 'Unofficial fan-made guide for Mobile Legends. Heroes stats, builds, rankings, items and more. Not affiliated with Moonton.';\nconst BASE_URL = 'https://moba-wiki-production.up.railway.app';\nconst DEFAULT_IMAGE = `${BASE_URL}/logo512.png`;\n\nconst setMetaTag = (property: string, content: string) => {\n  let meta = document.querySelector(`meta[property=\"${property}\"]`);\n  if (!meta) {\n    meta = document.createElement('meta');\n    meta.setAttribute('property', property);\n    document.head.appendChild(meta);\n  }\n  meta.setAttribute('content', content);\n};\n\nconst setNameMeta = (name: string, content: string) => {\n  let meta = document.querySelector(`meta[name=\"${name}\"]`);\n  if (!meta) {\n    meta = document.createElement('meta');\n    meta.setAttribute('name', name);\n    document.head.appendChild(meta);\n  }\n  meta.setAttribute('content', content);\n};\n\nexport const useSEO = ({ title, description, image }: SEOProps = {}) => {\n  useEffect(() => {\n    const fullTitle = title ? `${title} | ${BASE_TITLE}` : BASE_TITLE;\n    const desc = description || BASE_DESCRIPTION;\n    const img = image || DEFAULT_IMAGE;\n    const url = window.location.href;\n\n    document.title = fullTitle;\n\n    // Standard meta\n    setNameMeta('description', desc);\n\n    // Open Graph\n    setMetaTag('og:title', fullTitle);\n    setMetaTag('og:description', desc);\n    setMetaTag('og:image', img);\n    setMetaTag('og:url', url);\n    setMetaTag('og:type', 'website');\n    setMetaTag('og:site_name', 'MOBA Wiki');\n\n    // Twitter Card\n    setNameMeta('twitter:card', 'summary_large_image');\n    setNameMeta('twitter:title', fullTitle);\n    setNameMeta('twitter:description', desc);\n    setNameMeta('twitter:image', img);\n\n    return () => {\n      document.title = BASE_TITLE;\n      setNameMeta('description', BASE_DESCRIPTION);\n    };\n  }, [title, description, image]);\n};\n"],"names":["highlightValues","text","replace","sanitizeHtml","dirty","DOMPurify","sanitize","ALLOWED_TAGS","ALLOWED_ATTR","t","i18n","useTranslation","lang","language","gameId","useParams","useSEO","title","description","data","spells","isLoading","loading","error","queryError","useQuery","queryKey","queryKeys","all","Number","queryFn","fetcherRaw","concat","enabled","staleTime","STALE_5_MIN","_jsx","Loader","className","styles","children","length","_jsxs","map","spell","icon_url","src","alt","getSpellName","undefined","cooldown","unlocked_level","overview","overview_uk","getSpellOverview","description_uk","dangerouslySetInnerHTML","__html","getSpellDescription","id","BASE_TITLE","BASE_DESCRIPTION","DEFAULT_IMAGE","setMetaTag","property","content","meta","document","querySelector","createElement","setAttribute","head","appendChild","setNameMeta","name","image","arguments","useEffect","fullTitle","desc","img","url","window","location","href"],"ignoreList":[],"sourceRoot":""}